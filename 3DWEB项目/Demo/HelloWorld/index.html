<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hello World</title>
  <style>
    body { margin: 0; overflow: hidden; }
  </style>
  <script src="../js/WebGL.js"></script>
  <script src="../js/three.js"></script>
  <script src="../js/OrbitControls.js"></script>
</head>
<body>
  <script>
    if (WEBGL.isWebGLAvailable()) {
        Game();
    } else {
        var warning = WEBGL.getWebGLErrorMessage();
        document.getElementById('container').appendChild(warning);
    }
    function Game() {
      const {
        Scene,
        SphereGeometry,
        BoxGeometry,
        CylinderGeometry,
        MeshLambertMaterial,
        MeshPhongMaterial,
        BufferGeometry,
        BufferAttribute,
        MeshBasicMaterial,
        DoubleSide,
        LineBasicMaterial,
        Line,
        AxisHelper,
        Mesh, PointLight,
        AmbientLight,
        OrthographicCamera,
        WebGLRenderer,
        OrbitControls
      } = THREE;
      // 创建场景对象scene
      const scene = new Scene();
      // 创建网格模型
      // const geometry = new SphereGeometry(60, 40, 40);  // 球体几何对象
      // const material = new MeshLambertMaterial({
      //   color: 0x00ff00,
      //   opacity: 0.5,
      //   transparent: true,
      // });
      // const mesh = new Mesh(geometry, material);
      // scene.add(mesh);
      // const geometry2 = new BoxGeometry(100, 100, 100); // 立方体几何对象
      // const material2 = new MeshLambertMaterial({ color: 0x0000ff, wireframe: true });
      // const mesh2 = new Mesh(geometry2, material2);
      // mesh2.translateX(-120);
      // scene.add(mesh2);
      // const geometry3 = new CylinderGeometry(50, 50, 100, 25);
      // const material3 = new MeshPhongMaterial({
      //   color: 0xffff00,
      //   specular: 0x4488ee,
      //   shininess: 12
      // });
      // const mesh3 = new Mesh(geometry3, material3);
      // mesh3.position.set(120, 0, 0);
      // scene.add(mesh3);
      const bufferGeometry = new BufferGeometry();
      const vertices = new Float32Array([
        0, 0, 0,
        50, 0, 0,
        0, 100, 0,
        0, 0, 10,
        0, 0, 100,
        50, 0, 10,
      ]);
      const attribue = new BufferAttribute(vertices, 3);
      bufferGeometry.attributes.position = attribue;
      // const material = new MeshBasicMaterial({ color: 0x0000ff, side: DoubleSide });
      // const mesh = new Mesh(bufferGeometry, material);
      // scene.add(mesh);
      const material_line = new LineBasicMaterial({ color: 0xff0000 });
      const line = new Line(bufferGeometry, material_line);
      scene.add(line);
      // 创建辅助三维坐标系
      // const axisHelper = new AxisHelper(300);
      // scene.add(axisHelper);
      // 创建光源
      const point = new PointLight(0xffffff); // 点光源
      point.position.set(400, 200, 300); // 位置
      scene.add(point);
      const ambient = new AmbientLight(0x666666); // 环境光
      scene.add(ambient);
      // 点光源2  位置和point关于原点对称
      // const point2 = new THREE.PointLight(0xffffff);
      // point2.position.set(-400, -200, -300); //点光源位置
      // scene.add(point2); //点光源添加到场景中
      // 创建相机
      const w = window.innerWidth;
      const h = window.innerHeight;
      const aspect = w / h, s = 200;
      const camera = new OrthographicCamera(-s * aspect, s * aspect, s, -s, 1, 1000);
      camera.position.set(200, 200, 200);
      camera.lookAt(scene.position);
      // 创建渲染器
      const renderer = new WebGLRenderer();
      renderer.setSize(w, h);
      renderer.setClearColor(0xb9d3ff, 1);
      document.body.appendChild(renderer.domElement);
      // 渲染函数
      function render() {
        renderer.render(scene, camera);
        requestAnimationFrame(render);
      }
      // function render() {
      //   renderer.render(scene, camera);
      //   mesh.rotateY(0.01);
      //   requestAnimationFrame(render);
      // }
      // let t0 = new Date(); // 上次时间
      // function render() {
      //   let t1 = new Date();
      //   let t = t1 - t0;
      //   t0 = t1;
      //   requestAnimationFrame(render);
      //   renderer.render(scene, camera);
      //   mesh.rotateY(0.001 * t);
      // }
      render();
      // 创建控制器
      const controls = new OrbitControls(camera, renderer.domElement);
      // controls.addEventListener('change', render);
    }
  </script>
</body>
</html>